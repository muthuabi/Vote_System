<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../assets/bootstrap/css/bootstrap.min.css">
    <script src='../assets/bootstrap/js/jquery.min.js'></script>
    <script src='../assets/bootstrap/js/bootstrap.bundle.min.js'></script>
    <link rel="stylesheet" href="../assets/css-js/styles.css">
    <script src='../assets/css-js/script.js'></script>
    <script src="../assets/css-js/head_script.js"></script>
</head>
<body>
    <div class="container">
        <h2>SXC VOTE BALLOT</h2>
        <table class="table table-bordered">
            <thead>
                <tr><th>Name</th><th>Post</th><th>Vote</th></tr>
            </thead>
            <tbody id="ballot_all">

            </tbody>
        </table>
    </div>
</body>
<script>
    document.addEventListener("DOMContentLoaded",(main)=>{
    const table_ballot_all=document.getElementById("ballot_all");
    function fetch_ballot()
    {
    table_ballot_all.innerHTML="";
    $.ajax({
        url: 'http://localhost/sxc_vote_system/util_classes/Ballot.php?ballot=BALLOT_ALL',
        method: 'GET',
        dataType: 'json'
    })
    .done(function(data) {
      
        data.data.forEach(values=>{
            table_ballot_all.innerHTML+=`
            <tr><td>${values.name}</td><td>${values.post}</td><td>${values.vote}</td></tr>
            `;
            
        })

    })
    .fail(function(jqXHR, textStatus, errorThrown) {
        console.error("Request failed:", textStatus, errorThrown);
    })
    }
    fetch_ballot();
    setInterval(()=>{fetch_ballot()},3000);
});
    </script>
</html>